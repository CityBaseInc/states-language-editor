(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(t){t.exports={id:"states-language@0.1.0",nodes:{1:{id:1,data:{resource:"Start:yes",name:"Start",input_path:"",resource_path:"",output_path:"",is_end:!1},inputs:{start:{connections:[]}},outputs:{transition_event:{connections:[{node:2,input:"event",data:{}}]},catch_events:{connections:[{node:3,input:"event",data:{}}]}},position:[-735.9300225733634,-265.91636061829854],name:"Task"},2:{id:2,data:{event:":transition"},inputs:{event:{connections:[{node:1,output:"transition_event",data:{}}]}},outputs:{next:{connections:[{node:8,input:"start",data:{}}]}},position:[-316,-305.86669921875],name:"TransitionEvent"},3:{id:3,data:{errors:":error, :another_error"},inputs:{event:{connections:[{node:1,output:"catch_events",data:{}}]}},outputs:{next:{connections:[{node:4,input:"start",data:{}}]}},position:[-313.6749435665914,-9.196270324844804],name:"CatchEvent"},4:{id:4,data:{resource:"ChoiceResource",name:"TheChoice",input_path:"",output_path:""},inputs:{start:{connections:[{node:3,output:"next",data:{}}]}},outputs:{choice_events:{connections:[{node:5,input:"event",data:{}}]}},position:[64.20993227990971,33.848876402017495],name:"Choice"},5:{id:5,data:{events:":option_1"},inputs:{event:{connections:[{node:4,output:"choice_events",data:{}}]}},outputs:{next:{connections:[{node:7,input:"start",data:{}}]}},position:[456,24.033977982152948],name:"ChoiceEvent"},7:{id:7,data:{resource:"Redo:yes",name:"Redo",input_path:"",resource_path:"",output_path:"",is_end:!1},inputs:{start:{connections:[{node:5,output:"next",data:{}}]}},outputs:{transition_event:{connections:[{node:9,input:"event",data:{}}]},catch_events:{connections:[]}},position:[811.3950338600451,22.86919242910554],name:"Task"},8:{id:8,data:{resource:"Success:finish",name:"Success",input_path:"",resource_path:"",output_path:"",is_end:!1},inputs:{start:{connections:[{node:2,output:"next",data:{}}]}},outputs:{transition_event:{connections:[{node:9,input:"event",data:{}}]},catch_events:{connections:[]}},position:[68.9548532731377,-518.2120716792466],name:"Task"},9:{id:9,data:{event:":done"},inputs:{event:{connections:[{node:7,output:"transition_event",data:{}},{node:8,output:"transition_event",data:{}}]}},outputs:{next:{connections:[{node:10,input:"start",data:{}}]}},position:[1168.1641091304093,-155.9085844548651],name:"TransitionEvent"},10:{id:10,data:{name:"GoodBye",seconds:"3",timestamp:"",seconds_path:"",timestamp_path:"",is_end:!0},inputs:{start:{connections:[{node:9,output:"next",data:{}}]}},outputs:{transition_event:{connections:[]}},position:[1581.8728474008888,-175.4039954468915],name:"Wait"}}}},185:function(t,e,n){t.exports=n(386)},385:function(t,e,n){},386:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(25),i=n.n(o),c=n(52),s=n(77),u=n(76);var d=Object(u.b)(function(t,e){var n=Object(s.a)({},t);switch(e.type){case"SET_EDITOR_GRAPH":n.editor_graph=e.graph;break;case"SET_D3_GRAPH":n.d3_graph=e.graph;break;case"SET_STATES_LANGUAGE_GRAPH":var a="";a="string"===typeof e.graph?e.graph:JSON.stringify(e.graph,void 0,2),n.states_language_graph=a}return n},{editor_graph:{},d3_graph:{nodes:[],edges:[]},states_language_graph:{}}),p=n(78),l=n(7),h=n(179),m=n(411),v=n(412),f=n(413),g=n(414),b=n(417),E=n(415),w=n(416),O=n(387),_=n(2),j=n.n(_),y=n(13),C=n(14),k=n(16),x=n(15),S=n(17),N=n(4),T=n(35),I=n(175),P=n(181),R=n(107),A=n(177),G=n.n(A),B=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).apply(this,arguments))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,i=o.outputs,c=o.controls,s=o.inputs,u=o.selected;return r.a.createElement("div",{className:"node ".concat(u," ").concat(e.name)},r.a.createElement("div",{className:"title"},e.name),s.map(function(t){return r.a.createElement("div",{className:"input",key:t.key},r.a.createElement(T.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&r.a.createElement("div",{className:"input-title"},t.name),t.showControl()&&r.a.createElement(T.a,{className:"input-control",control:t.control,innerRef:a}))}),c.map(function(t){return r.a.createElement(T.a,{className:"control",key:t.key,control:t,innerRef:a})}),i.map(function(t){return r.a.createElement("div",{className:"output",key:t.key},r.a.createElement("div",{className:"output-title"},t.name),r.a.createElement(T.c,{type:"output",socket:t.socket,io:t,innerRef:n}))}))}}]),e}(T.b),L=function(t){function e(t,n,a){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(y.a)(this,e),(r=Object(k.a)(this,Object(x.a)(e).call(this,n))).emitter=t,r.key=n,r.component=e.component;var c=a.data[n]||o;return a.data[n]=c,r.props={readonly:i,value:c,onChange:function(t){r.setValue(t),r.emitter.trigger("process")},placeholder:n},r}return Object(S.a)(e,t),Object(C.a)(e,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.update()}}]),e}(N.c.Control);L.component=function(t){var e=t.value,n=t.onChange,a=t.placeholder;return r.a.createElement("input",{value:e,placeholder:a,ref:function(t){t&&t.addEventListener("pointerdown",function(t){return t.stopPropagation()})},onChange:function(t){return n(t.target.value)}})};var H=function(t){function e(t,n,a){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(y.a)(this,e),(r=Object(k.a)(this,Object(x.a)(e).call(this,n))).emitter=t,r.key=n,r.component=e.component;var i=a.data[n]||"";return a.data[n]=i,r.props={readonly:o,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")},placeholder:n},r}return Object(S.a)(e,t),Object(C.a)(e,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.update()}}]),e}(N.c.Control);H.component=function(t){var e=t.value,n=t.onChange,a=t.placeholder;return r.a.createElement("input",{type:"number",value:e,placeholder:a,ref:function(t){t&&t.addEventListener("pointerdown",function(t){return t.stopPropagation()})},onChange:function(t){return n(t.target.value)}})};var W=function(t){function e(t,n,a){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(y.a)(this,e),(r=Object(k.a)(this,Object(x.a)(e).call(this,n))).emitter=t,r.key=n,r.component=e.component;var i=a.data[n]||!1;return a.data[n]=i,r.props={readonly:o,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")},placeholder:n},r}return Object(S.a)(e,t),Object(C.a)(e,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.update()}}]),e}(N.c.Control);W.component=function(t){var e=t.value,n=t.onChange,a=t.placeholder;return r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:a,checked:e,ref:function(t){t&&t.addEventListener("pointerdown",function(t){return t.stopPropagation()})},onChange:function(t){return n(t.target.checked)}}),a)};var z=n(178),D=function(t,e){return t.reduce(function(t,n){return t[n.data.name]=V(n,e),t},{})},V=function(t,e){switch(t.name){case"Task":return $(t,e);case"Wait":return q(t,e);case"Choice":return J(t,e);default:return{}}},$=function(t,e){var n=K(t,e),a=n?n.type.join(","):"",r=M(t,e).map(function(t){return{ErrorEquals:t.type,Next:t.target.data.name}});return{Type:t.name,Resource:t.data.resource,TransitionEvent:a,Catch:r,InputPath:t.data.input_path,OutputPath:t.data.output_path,ResourcePath:t.data.resource_path,Next:n?n.target.data.name:"",End:t.data.is_end}},J=function(t,e){var n=X(t,e).map(function(t){return{StringEquals:t.type.join(","),Next:t.target.data.name}});return{Type:t.name,Resource:t.data.resource,Choices:n,InputPath:t.data.input_path,OutputPath:t.data.output_path}},q=function(t,e){var n=K(t,e),a=n?n.type.join(","):"",r={Type:t.name,TransitionEvent:a,Next:n?n.target.data.name:"",End:t.data.is_end};return t.data.seconds&&(r.Seconds=parseInt(t.data.seconds)),t.data.timestamp&&(r.Timestamp=t.data.timestamp),t.data.timestamp_path&&(r.TimestampPath=t.data.timestamp_path),t.data.seconds_path&&(r.SecondsPath=t.data.seconds_path),r},M=function(t,e){return e.filter(function(e){return U(e,t)})},U=function(t,e){return t.source.data.name===e.data.name&&"CatchEvent"===t.event.name},X=function(t,e){return e.filter(function(e){return F(e,t)})},F=function(t,e){return t.source.data.name===e.data.name&&"ChoiceEvent"===t.event.name},K=function(t,e){return e.find(function(e){return Q(e,t)})},Q=function(t,e){return t.source.data.name===e.data.name&&"TransitionEvent"===t.event.name},Y=function(t){return Object.keys(t.nodes).map(function(e){return t.nodes[e]})},Z=function(t){return t.filter(function(t){return!t.name.endsWith("Event")})},tt=function(t,e){return t.flatMap(function(t){return nt(t,e)})},et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map(function(t){return{id:e++,label:t.name,name:t.data.name}})},nt=function(t,e,n){return Object.keys(t.outputs).flatMap(function(n){return function(t,e,n){return e.outputs[t].connections.reduce(function(t,a){var r=n.nodes[a.node.toString()];if(r.outputs.next.connections.length>0){var o=r.outputs.next.connections[0].node.toString(),i=n.nodes[o];t.push({source:e,target:i,event:r,type:it(r)})}return t},[])}(n,t,e)})},at=function(t,e){return t.map(function(t){var n=ct(t.target.data.name,e);return{source:ct(t.source.data.name,e),target:n,type:t.type}})};function rt(t){var e=Y(t),n=Z(e),a=tt(n,t);return{StartAt:"Test",States:D(n,a)}}function ot(t){var e=Y(t),n=Z(e),a=et(n),r=tt(n,t);return{nodes:a,edges:at(r,a)}}function it(t){var e="";return t.data.errors?e=t.data.errors:t.data.event?e=t.data.event:t.data.events&&(e=t.data.events),e.split(",").map(function(t){return t.trim()})}function ct(t,e){return e.findIndex(function(e){return e.name===t})}var st="SET_D3_GRAPH",ut="SET_STATES_LANGUAGE_GRAPH";function dt(t){return{type:st,graph:t}}function pt(t){return{type:ut,graph:t}}var lt=new N.c.Socket("Transition Event"),ht=new N.c.Socket("Catch Event"),mt=new N.c.Socket("Choice Event"),vt=new N.c.Socket("Next"),ft=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"Task"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("start","Start",vt,!0),n=new N.c.Output("transition_event","Transition Event",lt),a=new N.c.Output("catch_events","Catch Events",ht),r=new L(this.editor,"name",t),o=new L(this.editor,"resource",t),i=new L(this.editor,"input_path",t,"$"),c=new L(this.editor,"resource_path",t,"$"),s=new L(this.editor,"output_path",t,"$"),u=new W(this.editor,"is_end",t);return t.addInput(e).addOutput(n).addOutput(a).addControl(r).addControl(o).addControl(i).addControl(c).addControl(s).addControl(u)}}]),e}(N.c.Component),gt=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"Choice"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("start","Start",vt,!0),n=new N.c.Output("choice_events","Choice Events",mt),a=new L(this.editor,"resource",t),r=new L(this.editor,"name",t),o=new L(this.editor,"input_path",t,"$"),i=new L(this.editor,"output_path",t,"$");return t.addInput(e).addOutput(n).addControl(r).addControl(a).addControl(o).addControl(i)}}]),e}(N.c.Component),bt=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"Wait"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("start","Start",vt,!0),n=new N.c.Output("transition_event","Transition Event",lt),a=new L(this.editor,"name",t),r=new H(this.editor,"seconds",t),o=new L(this.editor,"timestamp",t),i=new L(this.editor,"seconds_path",t),c=new L(this.editor,"timestamp_path",t),s=new W(this.editor,"is_end",t);return t.addInput(e).addOutput(n).addControl(a).addControl(r).addControl(o).addControl(i).addControl(c).addControl(s)}}]),e}(N.c.Component),Et=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"TransitionEvent"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("event","=",lt,!0),n=new N.c.Output("next","Next",vt),a=new L(this.editor,"event",t);return t.addInput(e).addOutput(n).addControl(a)}}]),e}(N.c.Component),wt=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"CatchEvent"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("event","=",ht,!0),n=new N.c.Output("next","Next",vt),a=new L(this.editor,"errors",t);return t.addInput(e).addOutput(n).addControl(a)}}]),e}(N.c.Component),Ot=function(t){function e(){return Object(y.a)(this,e),Object(k.a)(this,Object(x.a)(e).call(this,"ChoiceEvent"))}return Object(S.a)(e,t),Object(C.a)(e,[{key:"builder",value:function(t){var e=new N.c.Input("event","=",mt),n=new N.c.Output("next","Next",vt),a=new L(this.editor,"events",t);return t.addInput(e).addOutput(n).addControl(a)}}]),e}(N.c.Component);var _t=n(108),jt=n(43);var yt=function(t){var e,n,o=t.width,i=t.height,c=t.edges,s=t.nodes,u=t.onClick;return Object(a.useEffect)(function(){var t=new _t.graphlib.Graph({multigraph:!0}).setGraph({});s.forEach(function(e){t.setNode(e.name,{label:e.name})}),c.forEach(function(e){var n=s[e.source].name+"-"+s[e.target].name+"-"+e.type;t.setEdge(s[e.source].name,s[e.target].name,{label:e.type.join(",")},n)}),t.nodes().forEach(function(e){var n=t.node(e);n.rx=n.ry=5});var a=jt.select(e),r=jt.select(n),o=jt.zoom().on("zoom",function(){r.attr("transform",jt.event.transform)});a.call(o),(new _t.render)(r,t),a.call(o.transform,jt.zoomIdentity.translate((a.attr("width")-.8*t.graph().width)/2,20).scale(.8)),a.attr("height",.8*t.graph().height+20),a.selectAll(".dagre-d3 .node").on("click",function(e){t.nodes().forEach(function(e){return t.node(e).elem.classList.remove("selected")}),t.node(e).elem.classList.add("selected")})},[c,s,e,n,u]),r.a.createElement("svg",{className:"dagre-d3",ref:function(t){return e=t},width:o,height:i},r.a.createElement("g",{ref:function(t){return n=t}}))};var Ct=function(){var t=Object(c.b)(function(t){return t.d3_graph});return r.a.createElement("div",null,r.a.createElement(yt,{edges:t.edges,nodes:t.nodes,width:"300",height:"100"}))};var kt=function(){var t=Object(c.b)(function(t){return t.states_language_graph});return r.a.createElement("textarea",{rows:"50",onChange:function(t){return function(t){return d.dispatch(pt(t.target.value))}(t)},value:t})},xt=Object(h.a)(function(t){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},t.mixins.toolbar),appBar:{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},drawerPaperClose:Object(p.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}),appBarSpacer:t.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:t.spacing(4),paddingBottom:t.spacing(4)},paper:{padding:t.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:"70vh"}}});var St=function(){var t=xt(),e=Object(l.a)(t.paper,t.fixedHeight);return r.a.createElement("div",{className:t.root},r.a.createElement(m.a,null),r.a.createElement(v.a,{position:"absolute",className:Object(l.a)(t.appBar)},r.a.createElement(f.a,{className:t.toolbar},r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"States Language Editor"),r.a.createElement(b.a,{color:"inherit"}))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(E.a,{maxWidth:"xl",className:t.container},r.a.createElement(w.a,{container:!0,spacing:3},r.a.createElement(w.a,{item:!0,xs:12,md:8,lg:8},r.a.createElement(O.a,{className:e},r.a.createElement("div",{ref:function(t){return function(t){var e,n;return j.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:e=[new ft,new gt,new bt,new Ot,new wt,new Et],(n=new N.c.NodeEditor("states-language@0.1.0",t)).use(I.a),n.use(T.d,{component:B}),n.use(P.a),n.use(R.a),n.use(G.a),e.map(function(t){return n.register(t)}),n.on("process nodecreated noderemoved connectioncreated connectionremoved",function(){var t,e,a;return j.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("| Process |"),t=n.toJSON(),console.log(t),e=ot(t),a=rt(t),d.dispatch(dt(e)),d.dispatch(pt(a));case 7:case"end":return r.stop()}})}),n.fromJSON(z),n.view.resize(),n.trigger("process"),setTimeout(function(){R.a.zoomAt(n)},200);case 13:case"end":return a.stop()}})}(t)}}))),r.a.createElement(w.a,{item:!0,xs:12,md:4,lg:4},r.a.createElement(O.a,{className:e},r.a.createElement(Ct,null))),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(O.a,{className:t.paper},r.a.createElement(kt,null)))))))},Nt=n(418),Tt=n(29),It=Object(Tt.a)(),Pt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Nt.b,{history:It},r.a.createElement(Nt.c,null,r.a.createElement(Nt.a,{path:"/",component:St}),r.a.createElement(Nt.a,{path:"/states-language-editor",component:St}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(385);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}),i.a.render(r.a.createElement(c.a,{store:d},r.a.createElement(Pt,null)),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.a2e71a3f.chunk.js.map