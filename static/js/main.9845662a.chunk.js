(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e){e.exports={id:"states-language@0.1.0",nodes:{1:{id:1,data:{resource:"Start:yes",name:"Start"},inputs:{start:{connections:[]}},outputs:{transition_event:{connections:[{node:2,input:"event",data:{}}]},catch_events:{connections:[{node:3,input:"event",data:{}}]}},position:[-731,-339.86669921875],name:"Task"},2:{id:2,data:{event:":transition"},inputs:{event:{connections:[{node:1,output:"transition_event",data:{}}]}},outputs:{next:{connections:[{node:8,input:"start",data:{}}]}},position:[-316,-305.86669921875],name:"TransitionEvent"},3:{id:3,data:{errors:":error, :another_error"},inputs:{event:{connections:[{node:1,output:"catch_events",data:{}}]}},outputs:{next:{connections:[{node:4,input:"start",data:{}}]}},position:[-326,-102.86669921875],name:"CatchEvent"},4:{id:4,data:{resource:"ChoiceResource",name:"TheChoice"},inputs:{start:{connections:[{node:3,output:"next",data:{}}]}},outputs:{choice_events:{connections:[{node:5,input:"event",data:{}}]},catch_events:{connections:[{node:6,input:"event",data:{}}]}},position:[79,-91.86669921875],name:"Choice"},5:{id:5,data:{events:":1"},inputs:{event:{connections:[{node:4,output:"choice_events",data:{}}]}},outputs:{next:{connections:[{node:7,input:"start",data:{}}]}},position:[456,-123.86669921875],name:"ChoiceEvent"},6:{id:6,data:{errors:":error"},inputs:{event:{connections:[{node:4,output:"catch_events",data:{}}]}},outputs:{next:{connections:[]}},position:[489,125.13330078125],name:"CatchEvent"},7:{id:7,data:{resource:"Redo:yes",name:"Redo"},inputs:{start:{connections:[{node:5,output:"next",data:{}}]}},outputs:{transition_event:{connections:[]},catch_events:{connections:[]}},position:[804,-171.86669921875],name:"Task"},8:{id:8,data:{resource:"Success:finish",name:"Success"},inputs:{start:{connections:[{node:2,output:"next",data:{}}]}},outputs:{transition_event:{connections:[]},catch_events:{connections:[]}},position:[101,-436.86669921875],name:"Task"}}}},185:function(e,t,n){e.exports=n(386)},385:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),i=n(52),s=n(77),u=n(76);var d=Object(u.b)(function(e,t){var n=Object(s.a)({},e);switch(t.type){case"SET_EDITOR_GRAPH":n.editor_graph=t.graph;break;case"SET_D3_GRAPH":n.d3_graph=t.graph;break;case"SET_STATES_LANGUAGE_GRAPH":n.states_language_graph=t.graph}return n},{editor_graph:{},d3_graph:{nodes:[],edges:[]},states_language_graph:{}}),l=n(78),p=n(7),m=n(179),h=n(411),f=n(412),v=n(413),g=n(414),E=n(417),b=n(415),w=n(416),O=n(387),j=n(2),y=n.n(j),x=n(23),_=n(24),k=n(26),C=n(25),S=n(27),N=n(4),T=n(35),I=n(175),R=n(181),A=n(107),G=n(177),B=n.n(G),P=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.node,n=e.bindSocket,a=e.bindControl,o=this.state,c=o.outputs,i=o.controls,s=o.inputs,u=o.selected;return r.a.createElement("div",{className:"node ".concat(u," ").concat(t.name)},r.a.createElement("div",{className:"title"},t.name),s.map(function(e){return r.a.createElement("div",{className:"input",key:e.key},r.a.createElement(T.c,{type:"input",socket:e.socket,io:e,innerRef:n}),!e.showControl()&&r.a.createElement("div",{className:"input-title"},e.name),e.showControl()&&r.a.createElement(T.a,{className:"input-control",control:e.control,innerRef:a}))}),i.map(function(e){return r.a.createElement(T.a,{className:"control",key:e.key,control:e,innerRef:a})}),c.map(function(e){return r.a.createElement("div",{className:"output",key:e.key},r.a.createElement("div",{className:"output-title"},e.name),r.a.createElement(T.c,{type:"output",socket:e.socket,io:e,innerRef:n}))}))}}]),t}(T.b),H=function(e){function t(e,n,a){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(x.a)(this,t),(r=Object(k.a)(this,Object(C.a)(t).call(this,n))).emitter=e,r.key=n,r.component=t.component;var c=a.data[n]||"";return a.data[n]=c,r.props={readonly:o,value:c,onChange:function(e){r.setValue(e),r.emitter.trigger("process")},placeholder:n},r}return Object(S.a)(t,e),Object(_.a)(t,[{key:"setValue",value:function(e){this.props.value=e,this.putData(this.key,e),this.update()}}]),t}(N.c.Control);H.component=function(e){var t=e.value,n=e.onChange,a=e.placeholder;return r.a.createElement("input",{value:t,placeholder:a,ref:function(e){e&&e.addEventListener("pointerdown",function(e){return e.stopPropagation()})},onChange:function(e){return n(e.target.value)}})};var z=n(178),L=function(e,t){return e.reduce(function(e,n){var a=M(n,t),r=a?a.type.join(","):"",o=W(n,t).map(function(e){return{StringEquals:e.type,Next:e.target.data.name}}),c=D(n,t).map(function(e){return{ErrorEquals:e.type,Next:e.target.data.name}});return e[n.data.name]={Type:n.name,Resource:n.data.resource,TransitionEvent:r,Choices:o,Catch:c,Next:a?a.target.data.name:""},e},{})},D=function(e,t){return t.filter(function(t){return J(t,e)})},J=function(e,t){return e.source.data.name===t.data.name&&e.source.outputs.catch_events},W=function(e,t){return t.filter(function(t){return q(t,e)})},q=function(e,t){return e.source.data.name===t.data.name&&e.source.outputs.choice_events},M=function(e,t){return t.find(function(t){return U(t,e)})},U=function(e,t){return e.source.data.name===t.data.name&&e.source.outputs.transition_event},V=function(e){return Object.keys(e.nodes).map(function(t){return e.nodes[t]})},X=function(e){return e.filter(function(e){return!e.name.endsWith("Event")})},$=function(e,t){return e.flatMap(function(e){return K(e,t)})},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(function(e){return{id:t++,label:e.name,name:e.data.name}})},K=function(e,t,n){return Object.keys(e.outputs).flatMap(function(n){return function(e,t,n){return t.outputs[e].connections.reduce(function(e,a){var r=n.nodes[a.node.toString()];if(r.outputs.next.connections.length>0){var o=r.outputs.next.connections[0].node.toString(),c=n.nodes[o];e.push({source:t,target:c,type:ee(r)})}return e},[])}(n,e,t)})},Q=function(e,t){return e.map(function(e){var n=te(e.target.data.name,t);return{source:te(e.source.data.name,t),target:n,type:e.type}})};function Y(e){var t=V(e),n=X(t),a=$(n,e);return{StartAt:"Test",States:L(n,a)}}function Z(e){var t=V(e),n=X(t),a=F(n),r=$(n,e);return{nodes:a,edges:Q(r,a)}}function ee(e){var t="";return e.data.errors?t=e.data.errors:e.data.event?t=e.data.event:e.data.events&&(t=e.data.events),t.split(",").map(function(e){return e.trim()})}function te(e,t){return t.findIndex(function(t){return t.name===e})}var ne="SET_D3_GRAPH",ae="SET_STATES_LANGUAGE_GRAPH";function re(e){return{type:ne,graph:e}}function oe(e){return{type:ae,graph:e}}var ce=new N.c.Socket("Transition Event"),ie=new N.c.Socket("Catch Event"),se=new N.c.Socket("Choice Event"),ue=new N.c.Socket("Next"),de=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).call(this,"Task"))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"builder",value:function(e){var t=new N.c.Input("start","Start",ue,!0),n=new N.c.Output("transition_event","Transition Event",ce),a=new N.c.Output("catch_events","Catch Events",ie),r=new H(this.editor,"resource",e),o=new H(this.editor,"name",e);return e.addInput(t).addOutput(n).addOutput(a).addControl(o).addControl(r)}}]),t}(N.c.Component),le=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).call(this,"Choice"))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"builder",value:function(e){var t=new N.c.Input("start","Start",ue,!0),n=new N.c.Output("choice_events","Choice Events",se),a=new N.c.Output("catch_events","Catch Events",ie),r=new H(this.editor,"resource",e),o=new H(this.editor,"name",e);return e.addInput(t).addOutput(n).addOutput(a).addControl(o).addControl(r)}}]),t}(N.c.Component),pe=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).call(this,"TransitionEvent"))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"builder",value:function(e){var t=new N.c.Input("event","=",ce,!0),n=new N.c.Output("next","Next",ue),a=new H(this.editor,"event",e);return e.addInput(t).addOutput(n).addControl(a)}}]),t}(N.c.Component),me=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).call(this,"CatchEvent"))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"builder",value:function(e){var t=new N.c.Input("event","=",ie,!0),n=new N.c.Output("next","Next",ue),a=new H(this.editor,"errors",e);return e.addInput(t).addOutput(n).addControl(a)}}]),t}(N.c.Component),he=function(e){function t(){return Object(x.a)(this,t),Object(k.a)(this,Object(C.a)(t).call(this,"ChoiceEvent"))}return Object(S.a)(t,e),Object(_.a)(t,[{key:"builder",value:function(e){var t=new N.c.Input("event","=",se),n=new N.c.Output("next","Next",ue),a=new H(this.editor,"events",e);return e.addInput(t).addOutput(n).addControl(a)}}]),t}(N.c.Component);var fe=n(108),ve=n(43);var ge=function(e){var t,n,o=e.width,c=e.height,i=e.edges,s=e.nodes,u=e.onClick;return Object(a.useEffect)(function(){var e=new fe.graphlib.Graph({multigraph:!0}).setGraph({});s.forEach(function(t){e.setNode(t.name,{label:t.name})}),i.forEach(function(t){var n=s[t.source].name+"-"+s[t.target].name+"-"+t.type;e.setEdge(s[t.source].name,s[t.target].name,{label:t.type.join(",")},n)}),e.nodes().forEach(function(t){var n=e.node(t);n.rx=n.ry=5});var a=ve.select(t),r=ve.select(n),o=ve.zoom().on("zoom",function(){r.attr("transform",ve.event.transform)});a.call(o),(new fe.render)(r,e),a.call(o.transform,ve.zoomIdentity.translate((a.attr("width")-.8*e.graph().width)/2,20).scale(.8)),a.attr("height",.8*e.graph().height+20),a.selectAll(".dagre-d3 .node").on("click",function(t){e.nodes().forEach(function(t){return e.node(t).elem.classList.remove("selected")}),e.node(t).elem.classList.add("selected")})},[i,s,t,n,u]),r.a.createElement("svg",{className:"dagre-d3",ref:function(e){return t=e},width:o,height:c},r.a.createElement("g",{ref:function(e){return n=e}}))};var Ee=function(){var e=Object(i.b)(function(e){return e.d3_graph});return r.a.createElement("div",null,r.a.createElement(ge,{edges:e.edges,nodes:e.nodes,width:"300",height:"100"}))};var be=function(){var e=Object(i.b)(function(e){return e.states_language_graph});return r.a.createElement("pre",null,JSON.stringify(e,null,2))},we=Object(m.a)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(l.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:"70vh"}}});var Oe=function(){var e=we(),t=Object(p.a)(e.paper,e.fixedHeight);return r.a.createElement("div",{className:e.root},r.a.createElement(h.a,null),r.a.createElement(f.a,{position:"absolute",className:Object(p.a)(e.appBar)},r.a.createElement(v.a,{className:e.toolbar},r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title},"States Language Editor"),r.a.createElement(E.a,{color:"inherit"}))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(b.a,{maxWidth:"xl",className:e.container},r.a.createElement(w.a,{container:!0,spacing:3},r.a.createElement(w.a,{item:!0,xs:12,md:8,lg:8},r.a.createElement(O.a,{className:t},r.a.createElement("div",{ref:function(e){return function(e){var t,n;return y.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:t=[new de,new le,new he,new me,new pe],(n=new N.c.NodeEditor("states-language@0.1.0",e)).use(I.a),n.use(T.d,{component:P}),n.use(R.a),n.use(A.a),n.use(B.a),t.map(function(e){return n.register(e)}),n.on("process nodecreated noderemoved connectioncreated connectionremoved",function(){var e,t,a;return y.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("| Process |"),e=n.toJSON(),t=Z(e),a=Y(e),d.dispatch(re(t)),d.dispatch(oe(a));case 6:case"end":return r.stop()}})}),n.fromJSON(z),n.view.resize(),n.trigger("process"),setTimeout(function(){A.a.zoomAt(n)},200);case 13:case"end":return a.stop()}})}(e)}}))),r.a.createElement(w.a,{item:!0,xs:12,md:4,lg:4},r.a.createElement(O.a,{className:t},r.a.createElement(Ee,null))),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(O.a,{className:e.paper},r.a.createElement(be,null)))))))},je=n(418),ye=n(29),xe=Object(ye.a)(),_e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(je.b,{history:xe},r.a.createElement(je.c,null,r.a.createElement(je.a,{path:"/",component:Oe}),r.a.createElement(je.a,{path:"/states-language-editor",component:Oe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(385);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),c.a.render(r.a.createElement(i.a,{store:d},r.a.createElement(_e,null)),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.9845662a.chunk.js.map